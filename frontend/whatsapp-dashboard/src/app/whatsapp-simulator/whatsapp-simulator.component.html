<div class="whatsapp-simulator-container">
  <p-toast position="top-right"></p-toast>
  
  <p-card header="Simulador de WhatsApp" styleClass="whatsapp-card">
    <div class="wa-header">
      <span class="wa-icon">
        <svg viewBox="0 0 32 32" width="32" height="32">
          <path fill="#25D366" d="M16,2A14,14,0,0,0,4.8,23.4L2.4,29.8l6.6-2.1A14,14,0,1,0,16,2Zm0,25.6A11.6,11.6,0,0,1,10.1,26l-4.3,1.4,1.4-4.2a11.6,11.6,0,1,1,8.8,4.4Z"></path>
          <path fill="#25D366" d="M22.7,17.5c-.2-.1-1.1-.6-1.3-.6s-.3-.1-.4.1-.5.6-.6.8-.2.1-.4,0a5.2,5.2,0,0,1-1.5-.9,5.7,5.7,0,0,1-1.1-1.3c-.1-.2,0-.3.1-.4l.3-.3.2-.3a.2.2,0,0,0,0-.3l-.6-1.4c-.1-.3-.3-.4-.4-.4s-.2,0-.4,0a.8.8,0,0,0-.6.5,2.5,2.5,0,0,0-.8,1.8,4.3,4.3,0,0,0,.9,2.2,9.7,9.7,0,0,0,3.8,3.3,3.7,3.7,0,0,0,2.4.5,2.4,2.4,0,0,0,1.5-1.1,1.9,1.9,0,0,0,.1-1.1C23,17.6,22.8,17.6,22.7,17.5Z"></path>
        </svg>
      </span>
      <span class="wa-title">WhatsApp</span>
    </div>
    
    <div class="wa-body">
      <div class="wa-form">
        <div class="form-group">
          <label for="phoneNumber">Número de Teléfono</label>
          <p-inputMask 
            id="phoneNumber"
            [(ngModel)]="phoneNumber"
            mask="+99 999 9999999" 
            placeholder="+54 911 12345678"
            styleClass="w-100">
          </p-inputMask>
        </div>
        
        <div class="form-group">
          <label for="contactName">Nombre de Contacto (opcional)</label>
          <input 
            pInputText 
            id="contactName"
            [(ngModel)]="contactName"
            type="text" 
            placeholder="Nombre de Contacto" 
            class="w-100">
        </div>
        
        <div class="form-group">
          <label for="fileInput">Archivo</label>
          <div class="file-upload-container">
            <input 
              type="file" 
              id="fileInput" 
              (change)="onFileSelect($event)"
              accept="image/*,application/pdf,video/*,audio/*,text/plain">
              
            <span class="file-name" *ngIf="selectedFile">
              {{ selectedFile.name }}
            </span>
            <span class="file-hint" *ngIf="!selectedFile">
              Selecciona una imagen, video, documento o audio
            </span>
          </div>
        </div>
        
        <div class="form-actions">
          <button 
            pButton 
            icon="pi pi-send" 
            label="Enviar" 
            [disabled]="isUploading || !selectedFile"
            (click)="sendFile()"
            class="send-button">
          </button>
          
          <p-progressSpinner *ngIf="isUploading" [style]="{width: '30px', height: '30px'}"></p-progressSpinner>
        </div>
      </div>
    </div>
  </p-card>
  
  <p-divider *ngIf="uploadedFiles.length > 0"></p-divider>
  
  <div class="uploaded-files" *ngIf="uploadedFiles.length > 0">
    <h3>Archivos Enviados</h3>
    
    <div class="file-list">
      <p-card *ngFor="let file of uploadedFiles" styleClass="file-card">
        <div class="file-info">
          <div class="file-preview" *ngIf="file.fileUrl">
            <img [src]="file.fileUrl" alt="Preview" class="preview-image">
          </div>
          <div class="file-details">
            <p class="file-name">{{ file.fileName }}</p>
            <p class="file-meta">Enviado a: {{ file.contactName }} ({{ file.phoneNumber }})</p>
            <p class="file-date">{{ file.timestamp | date:'medium' }}</p>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</div>
